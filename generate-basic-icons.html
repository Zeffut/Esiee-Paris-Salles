<!DOCTYPE html>
<html>
<head>
    <title>G√©n√©rateur d'ic√¥nes PWA basiques</title>
    <style>
        body { font-family: system-ui; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; }
        .icon-preview { display: flex; flex-wrap: wrap; gap: 15px; margin: 20px 0; }
        .icon-item { text-align: center; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        canvas { border: 1px solid #ddd; border-radius: 4px; }
        .download-all { background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-size: 16px; cursor: pointer; margin: 20px 0; }
        .instructions { background: #e3f2fd; padding: 15px; border-radius: 6px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® G√©n√©rateur d'ic√¥nes PWA - Salles ESIEE</h1>

        <div class="instructions">
            <h3>üìã Instructions :</h3>
            <ol>
                <li>Cliquez sur "G√©n√©rer toutes les ic√¥nes" ci-dessous</li>
                <li>Les fichiers PNG seront t√©l√©charg√©s automatiquement</li>
                <li>Placez tous les fichiers dans le dossier <code>frontend/icons/</code></li>
                <li>Votre PWA sera pr√™te √† √™tre install√©e !</li>
            </ol>
        </div>

        <button class="download-all" onclick="generateAllIcons()">üöÄ G√©n√©rer toutes les ic√¥nes</button>

        <div class="icon-preview" id="iconPreview"></div>
    </div>

    <script>
        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
        const iconPreview = document.getElementById('iconPreview');

        function createIcon(size) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');

            // Fond sombre (couleur de l'app)
            ctx.fillStyle = '#161617';
            ctx.fillRect(0, 0, size, size);

            // Panneau interne avec coin arrondi
            const padding = size * 0.08;
            const innerSize = size - (padding * 2);
            ctx.fillStyle = '#2e2f2e';
            ctx.beginPath();
            ctx.roundRect(padding, padding, innerSize, innerSize, size * 0.05);
            ctx.fill();

            // Ic√¥ne principale - grille de salles
            const iconSize = size * 0.35;
            const centerX = size / 2;
            const centerY = size / 2 - size * 0.05;

            // B√¢timent principal (rectangle orange)
            ctx.fillStyle = '#ff6a1a';
            ctx.fillRect(centerX - iconSize/2, centerY - iconSize/2, iconSize, iconSize);

            // Fen√™tres/salles (grille 3x3)
            ctx.fillStyle = '#161617';
            const windowSize = iconSize * 0.15;
            const windowSpacing = iconSize * 0.28;

            for (let row = 0; row < 3; row++) {
                for (let col = 0; col < 3; col++) {
                    const x = centerX - iconSize/2 + windowSpacing + col * windowSpacing;
                    const y = centerY - iconSize/2 + windowSpacing + row * windowSpacing;
                    ctx.fillRect(x, y, windowSize, windowSize);
                }
            }

            // Texte "ESIEE" (seulement sur les grandes ic√¥nes)
            if (size >= 152) {
                ctx.fillStyle = '#ffffff';
                ctx.font = `bold ${size * 0.08}px -apple-system, system-ui, sans-serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('ESIEE', centerX, centerY + iconSize * 0.65);
            }

            // Badge de statut (point vert - optionnel)
            if (size >= 128) {
                ctx.fillStyle = '#34C759';
                ctx.beginPath();
                ctx.arc(centerX + iconSize * 0.35, centerY - iconSize * 0.35, size * 0.05, 0, Math.PI * 2);
                ctx.fill();
            }

            return canvas;
        }

        function downloadCanvas(canvas, filename) {
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        function generateAllIcons() {
            iconPreview.innerHTML = '';

            sizes.forEach((size, index) => {
                setTimeout(() => {
                    const canvas = createIcon(size);
                    const filename = `icon-${size}x${size}.png`;

                    // Afficher l'aper√ßu
                    const iconItem = document.createElement('div');
                    iconItem.className = 'icon-item';
                    iconItem.innerHTML = `
                        <h4>${size}√ó${size}</h4>
                        ${canvas.outerHTML}
                        <p style="margin: 10px 0 0 0; font-size: 12px; color: #666;">${filename}</p>
                    `;
                    iconPreview.appendChild(iconItem);

                    // T√©l√©charger automatiquement
                    downloadCanvas(canvas, filename);
                }, index * 200); // D√©lai pour √©viter de saturer le navigateur
            });

            // Message de confirmation
            setTimeout(() => {
                alert('‚úÖ Toutes les ic√¥nes ont √©t√© g√©n√©r√©es !\n\nPlacez tous les fichiers PNG t√©l√©charg√©s dans le dossier frontend/icons/ de votre projet.');
            }, sizes.length * 200 + 500);
        }

        // G√©n√©rer un aper√ßu initial
        window.addEventListener('load', () => {
            const previewCanvas = createIcon(128);
            previewCanvas.style.margin = '10px auto';
            previewCanvas.style.display = 'block';

            const previewDiv = document.createElement('div');
            previewDiv.innerHTML = '<h3>üîç Aper√ßu (128√ó128)</h3>';
            previewDiv.appendChild(previewCanvas);
            previewDiv.style.textAlign = 'center';
            previewDiv.style.background = 'white';
            previewDiv.style.padding = '20px';
            previewDiv.style.borderRadius = '8px';
            previewDiv.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';

            document.querySelector('.container').insertBefore(previewDiv, iconPreview);
        });
    </script>
</body>
</html>